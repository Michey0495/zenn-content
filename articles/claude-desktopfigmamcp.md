---
title: "Claude DesktopからFigmaを直接操作する：MCP導入とプラグイン開発の実践"
emoji: "⚡"
type: "tech"
topics: ["Claude", "Figma", "MCP", "AI", "デザイン自動化"]
published: true
---

## 「プロンプトでFigmaを操作したい」という欲望

デザイン作業でFigmaを開いて、パーツを配置して、色を調整して……ってやってるうちに思ったの。

**これ、全部Claudeに指示して終わらせたくない？**

「この画面からFigmaを操作できるようにして」って頼んだら、実際にできちゃった。しかも想像以上に実用的。

今回やったのは、Claude DesktopからFigma MCPを使ってデザインツールを直接操作できるようにする試み。最終的には独自プラグインまで作って、理想の形に持っていった話。

## Figma MCPの導入で見えた可能性

最初に試したのがFigma MCP。MCPっていうのはModel Context Protocolのことで、Claudeが外部ツールを直接操作できるようにする仕組み。

導入自体は簡単だった：

1. Figmaのアクセストークンを取得
2. Claude Desktopの設定ファイルに追記
3. 再起動

```json
{
  "mcpServers": {
    "figma": {
      "command": "npx",
      "args": ["-y", "@modelcontextprotocol/server-figma"],
      "env": {
        "FIGMA_PERSONAL_ACCESS_TOKEN": "your-token-here"
      }
    }
  }
}
```

これだけでClaude経由でFigmaのファイル情報を取得できるようになった。

でも、ここで気づいたの。**情報を読むことはできても、デザインを作ることはできない**んだって。

既存のデザインを分析したり、コンポーネント一覧を取得したりはできる。でも私がやりたかったのは「Claudeよ、このデザイン作って」って指示して完成させることだったわけ。

## 理想を実現するための方向転換

ここで選択肢は3つあった：

1. Figma APIをゴリゴリ叩いてプログラマティックに作る
2. 別ツールで作ってからFigmaにインポート
3. Figmaプラグインを自作してClaude連携

1は技術的には可能だけど、Figma APIには制限が多い。2は結局手作業が残る。

だから3を選んだ。**Figmaのプラグインを作って、そこからClaude経由でデザイン生成できるようにする**。

Pencil AIがまさにこのアプローチを取ってるって気づいたのが大きかった。あれはプラグイン内でAI生成したデザインを直接Figma上に配置してる。

## プラグイン開発で直面した技術的な壁

Figmaプラグイン開発、想像より面倒だった。

特に困ったのが**UIスレッドとプラグインスレッドの分離**。Figmaプラグインは2つのコンテキストで動く：

- UI部分（HTML/CSS/JS）
- プラグインロジック（Figma APIを操作する部分）

この2つはメッセージパッシングでしか通信できない。

```javascript
// UI側からプラグインに送る
parent.postMessage({ pluginMessage: { type: 'create-rectangle' } }, '*');

// プラグイン側で受け取る
figma.ui.onmessage = msg => {
  if (msg.type === 'create-rectangle') {
    const rect = figma.createRectangle();
    // デザイン操作
  }
};
```

最初はここで混乱した。なんで直接API叩けないの？って。

でもこの設計のおかげで、UI側でClaude APIを呼んで、その結果をプラグイン側に渡してデザインを生成する、っていう流れが作れた。

## 実際に動かしてみて変わったこと

完成したプラグインで試したのは、Claudeに「3カラムレイアウトのダッシュボード作って」って指示すること。

プラグインを起動して、プロンプトを入れるだけ。

結果？**本当に作ってくれた**。

- レイアウト用のフレーム
- 各カードのコンポーネント
- テキストとアイコンの配置
- 色の指定

全部Figma上に自動配置された。

もちろん完璧じゃない。細かい調整は必要。でもゼロから作るより圧倒的に速い。

特に良かったのは**反復作業から解放されたこと**。似たようなカードを10個作るとか、レイアウトパターンを試すとか、そういうのをプロンプトだけで終わらせられる。

## Pencilからの移行で学んだこと

実は最初、Pencil AIで作ったデザインをFigmaに持ってくることも試してた。

でもSVG書き出しがうまくいかなくて、レイアウトが崩れまくった。Pencilの座標系とFigmaの座標系が違うのか、入れ子構造がおかしくなるのか、とにかく使い物にならなかった。

だから直接Figma上で生成する方式に切り替えた。これが正解だった。

**中間フォーマットを挟むとロスが出る**。最初から最終形式で作れるなら、そっちの方がいい。

## これからの使い方

今の構成だと、Claude Desktopから：

- 既存デザインの分析（Figma MCP経由）
- 新規デザインの生成（自作プラグイン経由）

両方できる。

使い分けはシンプル。読むだけならMCP、作るならプラグイン。

プラグインはまだ改善の余地だらけ。コンポーネント化とか、バリエーション生成とか、やりたいことは山ほどある。

でも基盤はできた。**「プロンプトでデザインを作る」環境が整った**。

あなたがもしデザインの反復作業にウンザリしてるなら、試してみる価値あると思う。コード書けなくても、Figma API触ったことなくても、Claudeに聞きながらやれば意外となんとかなるから。

私がやったのは結局、「こうしたい」って理想を明確にして、それを実現する方法を探しただけ。技術的な壁は確かにあったけど、全部Claudeと一緒に乗り越えられた。

手作業は卒業しよう。デザインもAIに任せちゃえばいいの。